---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getDictionary, getLangFromUrl, languages, useTranslations } from '../../i18n/utils';

export function getStaticPaths() {
  return languages.map((lang) => ({ params: { lang } }));
}

const lang = getLangFromUrl(Astro.url);
const dict = getDictionary(lang);
const t = useTranslations(lang);
const featureCards = [dict.features.autoDetect, dict.features.private, dict.features.fast];
---

<BaseLayout lang={lang} title={t('meta.title')} description={t('meta.description')} showGlow={true}>
  <div class="page">
    <nav class="lang-switcher">
      {
        lang === 'en' ? (
          <>
            <span class="lang-active">{dict.nav.langFlag}</span>
            <a href={`/${dict.nav.otherLang}`} title={dict.nav.otherTitle}>{dict.nav.otherFlag}</a>
          </>
        ) : (
          <>
            <a href={`/${dict.nav.otherLang}`} title={dict.nav.otherTitle}>{dict.nav.otherFlag}</a>
            <span class="lang-active">{dict.nav.langFlag}</span>
          </>
        )
      }
    </nav>

    <section class="hero">
      <div class="app-icon">
        <img src="/icon.png" alt="ScanEasy" class="app-icon-img" />
      </div>
      <h1>Scan<span class="gradient-text">Easy</span></h1>
      <p class="tagline">{dict.hero.tagline}</p>
    </section>

    <section class="features">
      {
        featureCards.map((feature) => (
          <div class="feature">
            <div class="feature-icon">{feature.icon}</div>
            <h3>{feature.title}</h3>
            <p>{feature.desc}</p>
          </div>
        ))
      }
    </section>

    <section class="cta">
      <div class="cta-button disabled">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.8-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>
        {dict.cta.button}
      </div>
      <p class="cta-sub">{dict.cta.sub}</p>
    </section>

    <footer>
      <div class="footer-links">
        <a href={`/${lang}/privacy`}>{dict.footer.privacy}</a>
        <a href={`/${lang}/terms`}>{dict.footer.terms}</a>
        <a href={`mailto:${dict.footer.email}`}>{dict.footer.contact}</a>
      </div>
      <p class="copyright">{dict.footer.copyright}</p>
    </footer>
  </div>
</BaseLayout>
